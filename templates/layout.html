<!doctype html>
<html>
<head>
  <title>{% block title %}{% endblock %}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <script src="{{ url_for('static', filename='editor.js') }}"></script>
</head>
<body>
<div id="sidebar">
  <a href="{{ url_for('index') }}">Home</a>
  <h2>Books</h2>
  <ul class="tree">
    {% for f in folders %}
    <li><a href="/folder/{{ f }}">{{ f }}</a>
      <ul>
        {% for sub in list_subfolders(f) %}
        <li>{{ sub }}
          <ul>
            {% for c in list_chapters(f ~ '/' ~ sub) %}
            <li><a href="/folder/{{ f }}/{{ sub }}/{{ c }}">{{ c }}</a></li>
            {% endfor %}
          </ul>
        </li>
        {% endfor %}
        {% for c in list_chapters(f) %}
        <li><a href="/folder/{{ f }}/{{ c }}">{{ c }}</a></li>
        {% endfor %}
      </ul>
    </li>
    {% endfor %}
  </ul>
</div>
<div id="main">
  {% with messages = get_flashed_messages() %}
  {% if messages %}
  <ul class="flashes">
    {% for msg in messages %}<li>{{ msg }}</li>{% endfor %}
  </ul>
  {% endif %}
  {% endwith %}
  {% block content %}{% endblock %}
</div>
</body>
</html>
